# Инструкция по развертыванию обновленного смарт-контракта

## Проблема
Ошибка "Voter is not registered" появляется потому, что в блокчейне все еще работает старая версия контракта с системой регистрации.

## Решение

### 1. Перекомпилировать контракт
```bash
# Перейти в папку с контрактом
cd Contracts

# Компилировать контракт (если установлен solc)
solc --abi --bin --optimize --overwrite -o . Voting.sol

# Или использовать Remix IDE:
# 1. Открыть https://remix.ethereum.org/
# 2. Создать файл Voting.sol
# 3. Вставить обновленный код
# 4. Компилировать
# 5. Развернуть новый контракт
```

### 2. Развернуть новый контракт
**ВАЖНО:** Нужно развернуть НОВЫЙ экземпляр контракта, а не обновить существующий.

### 3. Обновить адрес контракта во всех приложениях

#### Backend (Backend/VotingAPI/appsettings.json):
```json
{
  "Blockchain": {
    "ContractAddress": "0xНОВЫЙ_АДРЕС_КОНТРАКТА",
    "RpcUrl": "YOUR_RPC_URL",
    "AdminPrivateKey": "YOUR_PRIVATE_KEY"
  }
}
```

#### Frontend (Frontend/voting-ui/src/services/blockchain.js):
```javascript
const CONTRACT_ADDRESS = '0xНОВЫЙ_АДРЕС_КОНТРАКТА';
```

#### Mobile (Mobile/src/services/blockchain.js):
```javascript
const CONTRACT_ADDRESS = '0xНОВЫЙ_АДРЕС_КОНТРАКТА';
```

### 4. Перезапустить все сервисы
```bash
# Остановить все запущенные процессы
# Затем запустить заново:
start-all.bat
```

## Альтернативное решение (быстрое)

Если у вас есть доступ к админскому аккаунту контракта, можно попробовать:

1. Развернуть контракт в тестовой сети (например, Sepolia)
2. Обновить адрес контракта в настройках
3. Создать новое голосование для тестирования

## Проверка

После развертывания нового контракта:
1. Создайте новое голосование
2. Попробуйте проголосовать без регистрации
3. Ошибка "Voter is not registered" должна исчезнуть 